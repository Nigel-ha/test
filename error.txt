# Directly embed the token into the kubeconfig without using a variable
python -c 'import sys, yaml, json; config=yaml.safe_load(sys.stdin); config["users"][0]["user"]={"token": "'$(aws eks get-token --cluster-name "${clusterName}" --region ap-southeast-2 --query 'status.token' --output text)'"}; yaml.safe_dump(config, sys.stdout, default_flow_style=False)' < kubeconfig > kubeconfig_modified

# Replace the original kubeconfig file
mv kubeconfig_modified kubeconfig
